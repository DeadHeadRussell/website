var pages=null;
(function(){function f(){c&&(document.body.innerHTML='<div>Please use one of the following browsers<ul><li><a href="http://www.google.com/chrome/">Google Chrome</a></li><li><a href="http://www.mozilla.com">Mozilla Firefox</a></li></ul></div>')}var c=!1,g=!1,i=!1,h=function(){if(g&&c)try{var h=document.createElement("Div");document.body.appendChild(h);h.appendChild(CreateBanner(data.about.name,data.about.title));var l=location.pathname.split("/"),l=0==l[1].length?"home":l[1],n={home:{text:"Home",pageFunc:CreateHomePage},
music:{text:"Music",pageFunc:CreateMusicPage},soft:{text:"Software",pageFunc:CreateSoftPage},resume:{text:"Resumes / CVs",pageFunc:CreateResumesPage}},j;for(j in n)window.history&&window.history.pushState&&j!=l?window.setTimeout(function(a){return function(){n[a].page=n[a].pageFunc()}}(j),0):j==l&&(n[j].page=n[j].pageFunc());pages=CreatePageHandler(h,n,"home")}catch(b){console&&(console.log(b.message),console.log(b.stack)),i=!0,f()}};(function(){try{var c=new XMLHttpRequest;c.open("GET","/data.json",
!0);c.addEventListener("readystatechange",function(c){4===c.target.readyState&&200===c.target.status&&(data=JSON.parse(c.target.responseText),g=!0,h())},!1);c.send()}catch(l){i=!0,f()}})();window.addEventListener("load",function(){c=!0;i?f():h()},!1)})();var CreatePageHandler=function(f,c,g){function i(a,d,b){var c="/"+a;d&&0<d.length&&(c+="/"+d.join("/"));if(history[b])history[b]({id:a,subPages:d},escape(a),escape(c))}function h(a,d){i(a,d,"replaceState")}var k=location.pathname.split("/");k.shift();var l=k.shift();""!==l&&(g=l);var n=null,j=document.createElement("Div");j.className="Main";f.appendChild(j);var b=CreateHeader(c,function(a,d){var b=c[a].page;n?transition.fade(j,b.node,function(a){a==transition.SUCCESS&&(n=b);d&&d(a)}):(j.appendChild(b.node),
n=b,d(transition.STARTING),h(a,b.subPages))},g,k),g=CreateAudioPlayer();f.insertBefore(b.node,j);f.appendChild(g.getNode());window.addEventListener("popstate",function(a){(a=a.state)&&a.id&&b.select(a.id,a.subPages,!0);return!0},!1);return obj={gotoPage:function(a,d){b.select(a,d)},pushState:function(a,b){i(a,b,"pushState")},replaceState:h,audioPlayer:g}},CreateHomePage=function(){var f=document.createElement("Div"),c=document.createElement("Div");c.className="home";var g=document.createElement("Div");
g.className="head";var i=document.createElement("H1");i.appendChild(document.createTextNode("Welcome."));g.appendChild(i);i=document.createElement("Div");i.appendChild(document.createTextNode(data.intro));g.appendChild(i);c.appendChild(g);g=CreateBoxView([{id:"music",title:"Music",path:"/music",imgSrc:"/img/music/main.jpg"},{id:"soft",title:"Software",path:"/soft",imgSrc:"/img/soft/main.jpg"},{id:"resume",title:"Resumes",path:"/resume",imgSrc:"/img/resume/main.jpg"}],function(b){pages.gotoPage(b.id);
return!0});c.appendChild(g);g=[];for(i=0;i<data.sites.length;i++){var h=data.sites[i],k=document.createElement("Div"),l=document.createElement("Div"),n=document.createElement("A");n.appendChild(document.createTextNode(h.name));n.href=h.link;n.setAttribute("target","_blank");l.appendChild(n);k.appendChild(l);l=document.createElement("Div");l.appendChild(document.createTextNode(h.desc));k.appendChild(l);g.push({id:h.name,node:k})}g=CreateList("Awesome Sites",g);g.className+=" sites";c.appendChild(g);
g={id:"contactEmail",node:document.createElement("A")};g.node.appendChild(document.createTextNode(data.contact.email));g.node.href="mailto:"+data.contact.email;g=CreateList("Contact",[g]);g.className+=" contact";c.appendChild(g);f.appendChild(c);var j={node:f,subPages:[],changeSubPage:function(b,a,d){j.subPages=[];d||pages.pushState("home",j.subPages)}};return j},CreateMusicPage=function(){function f(a,b,d,c,r){(c=!1!==c)?transition.fade(a,b,function(a){a==transition.SUCCESS&&C.changePage(d[0],!c);
a==transition.STARTING&&(t.subPages=d,r||pages.pushState("music",t.subPages))}):(a.replaceChild(b,a.firstChild),C.changePage(d[0],!c),t.subPages=d,r||pages.pushState("music",t.subPages))}function c(a,b,d){f(equipmentContent,a.content,["equipment",a.type,a.title],b,d)}function g(a,b,d){f(y,a.content,["artists",a.title],b,d);return!0}function i(a,b,d){f(equipmentContent,a.content,["equipment",a.title],b,d);return!0}function h(a,b){f(y,w,["artists"],a,b)}function k(a,b){f(equipmentContent,z,["equipment"],
a,b)}for(var l=[],n=[],j=0;j<data.artists.length;j++){var b=data.artists[j],a=document.createElement("Div");a.className="artist";var d=document.createElement("Img");d.src="/img/music/"+b.name+"/main.jpg";d.alt="";a.appendChild(d);var p=document.createElement("Div");p.appendChild(document.createTextNode(b.description));a.appendChild(p);for(p=0;p<b.albums.length;p++){var m=b.albums[p],q=document.createElement("Div"),o=document.createElement("Img");o.addEventListener("error",function(a){a.target.parentNode.removeChild(a.target)},
!1);o.src="/img/music/"+b.name+"/"+m.name+".png";o.alt="";q.appendChild(o);o=document.createElement("Div");o.appendChild(document.createTextNode(m.description));q.appendChild(o);q=CreateSubSection(m.name,"",q);m.link&&(o=document.createElement("A"),o.appendChild(document.createTextNode(m.link)),o.href=m.link,o.setAttribute("target","_blank"),o.className="Content",q.appendChild(o));var u=document.createElement("Div");u.className="description";u.appendChild(document.createTextNode(" "));u.setAttribute("aria-live",
"polite");for(var v=function(a){return function(b){var d=document.createElement("Div"),c=document.createElement("Div");c.className="title";c.appendChild(document.createTextNode(b.text));b=b.desc.replace(/\n/g,"</div><div>");d.innerHTML="<div>"+b+"</div>";d.insertBefore(c,d.firstChild);a.replaceChild(d,a.firstChild);a.style.paddingLeft=a.previousSibling.offsetWidth+35+"px"}}(u),s=[],r=0;m.songs&&r<m.songs.length;r++){var A=m.songs[r],B=j+"/"+p+"/"+r,D=document.createElement("Div"),t={id:B,node:D,text:A.name,
desc:A.description,callback:v};A.recording&&(o=document.createElement("Div"),o.className="control play",o.setAttribute("role","button"),D.appendChild(o),A.callback=function(a,b,d){return function(c){a.className=c?"control pause":"control play";b(d)}}(o,v,t),B=function(a){return function(){pages.audioPlayer.toggle(a);return true}}(B),o.addEventListener("keydown",keyToClick(B),!1));o=document.createElement("Span");o.appendChild(document.createTextNode(A.name));D.appendChild(o);s.push(t)}o=function(a){pages.audioPlayer.toggle(a.id)};
m.songs&&0<m.songs.length&&(m=CreateList("Tracks",s,o),q.appendChild(m),q.appendChild(u));a.appendChild(q)}m=document.createElement("A");m.href="/music/artists";m.className="back";m.addEventListener("click",function(a){return preventDefaultLink(a)},!1);m.addEventListener("click",h,!1);m.addEventListener("keydown",keyToClick(h),!1);m.setAttribute("role","button");m.setAttribute("tabindex","0");m.setAttribute("title","Back");p=document.createElement("Div");p.appendChild(CreatePageTitle(b.name));p.appendChild(m);
p.appendChild(a);p={id:b.name,title:b.name,path:"/music/artists/"+b.name,imgSrc:d.src,content:p};b.end?n.push(p):l.push(p)}for(var x=[],j=0;j<data.equipment.length;j++){e=data.equipment[j];b=[];a={id:e.name,title:e.name,path:"/music/equipment/"+e.name,imgSrc:"/img/equipment/"+e.name+"/main.jpg"};for(p=0;p<e.equipment.length;p++)d=e.equipment[p],o=function(a){return function(){i(a)}}(a),m=document.createElement("A"),m.href="/music/equipment/"+e.name,m.className="back",m.addEventListener("click",function(a){return preventDefaultLink(a)},
!1),m.addEventListener("click",o,!1),m.addEventListener("keydown",keyToClick(o),!1),m.setAttribute("role","button"),m.setAttribute("tabindex","0"),m.setAttribute("title","Back"),o=document.createElement("Img"),o.src="/img/equipment/"+e.name+"/"+d.name+".jpg",q=document.createElement("Div"),q.appendChild(o),o=document.createElement("Div"),o.appendChild(CreatePageTitle(d.name)),o.appendChild(m),o.appendChild(q),b.push({id:d.name,title:d.name,path:"/music/equipment/"+e.name+"/"+d.name,imgSrc:"/img/equipment/"+
e.name+"/"+d.name+".jpg",content:o,type:e.name});m=document.createElement("A");m.href="/music/equipment";m.className="back";m.addEventListener("click",function(a){return preventDefaultLink(a)},!1);m.addEventListener("click",k,!1);m.addEventListener("keydown",keyToClick(k),!1);m.setAttribute("role","button");m.setAttribute("tabindex","0");m.setAttribute("title","Back");q=CreateBoxView(b,c);p=document.createElement("Div");p.className="equipmentSection";p.appendChild(CreatePageTitle(e.name));p.appendChild(m);
p.appendChild(q);a.content=p;a.tiles=b;x.push(a)}j=document.createElement("Div");j.className="artists";var y=document.createElement("Div");j.appendChild(y);var w=document.createElement("Div"),p=CreateSubSection("Current Acts","",CreateBoxView(l,g)),b=CreateSubSection("Previous Acts","",CreateBoxView(n,g));w.appendChild(CreatePageTitle("Related Acts"));w.appendChild(p);w.appendChild(b);y.appendChild(w);p=document.createElement("Div");p.className="equipment";equipmentContent=document.createElement("Div");
p.appendChild(equipmentContent);var z=document.createElement("Div"),b=CreateBoxView(x,i);z.appendChild(CreatePageTitle("Equipment"));z.appendChild(b);equipmentContent.appendChild(z);var C=CreateNavigation("Navigation",{artists:{title:"Related Acts",node:j},equipment:{title:"Equipment",node:p}},"/music/","artists",function(a,b){var d="artists"===a?y:equipmentContent;if(d.firstChild===("artists"===a?w:z))a!=b&&(t.subPages=[a],pages.pushState("music",t.subPages));else if(d=d.children[0],a==b)"artists"==
a?h():k();else{var c="artists"===a?l.concat(n):x,r;for(r in c)if(d==c[r].content){t.subPages=[a,c[r].title];pages.pushState("music",t.subPages);return}h()}}),E=["artists"];return t={node:C.node,subPages:E,changeSubPage:function(a,b,d){if(!a||1>a.length)a=b?E:t.subPages;if("artists"==a[0]){if(1<a.length){var r=l.concat(n);a[1]=unescape(a[1]);for(var f=0;f<r.length;f++)if(r[f].title===a[1]){g(r[f],b,d);return}}h(b,d)}else if("equipment"==a[0]){if(1<a.length){a[1]=unescape(a[1]);for(f=0;f<x.length;f++)if(r=
x[f],r.title===a[1]){if(a[2]){a[2]=unescape(a[2]);for(var j=0;j<r.tiles.length;j++){var m=r.tiles[j];if(m.title===a[2]){c(m,b,d);return}}}i(x[f],b,d);return}}k(b,d)}}}},CreateSoftPage=function(){var f=document.createElement("Div");f.className="softwareProjects";for(var c=0;c<data.softwareProjects.length;c++){var g=data.softwareProjects[c],i=document.createElement("Div"),h=document.createElement("A");h.href="https://github.com/deadheadrussell/"+g.repository_name;h.appendChild(document.createTextNode("Source"));
i.appendChild(h);h=document.createElement("Img");h.src="/img/soft/"+g.name+".png";i.appendChild(h);h=document.createElement("P");h.appendChild(document.createTextNode(g.description));i.appendChild(h);f.appendChild(CreateSubSection(g.name,"",i))}g=document.createElement("div");g.className="softwareProjects";for(c=0;c<data.schoolProjects.length;c++){var h=data.schoolProjects[c],k=document.createElement("span");k.appendChild(document.createTextNode(h.description));h=CreateSubSection(h.course,"",k);g.appendChild(h)}i=
document.createElement("div");i.className="softwareProjects";for(c=0;c<data.workProjects.length;c++)h=data.workProjects[c],k=document.createElement("span"),k.appendChild(document.createTextNode(h.description)),h=CreateSubSection(h.name,h.company,k),i.appendChild(h);var l={projects:{title:"Projects",node:f},school:{title:"School Projects",node:g},work:{title:"Work Projects",node:i}},n=CreateNavigation("Navigation",l,"/soft/","projects",function(a,d){a!=d&&(b.subPages=[a],pages.pushState("soft",b.subPages))}),
j=["projects"],b={node:n.node,subPages:j,changeSubPage:function(a,d,c){if(!a||1>a.length)a=d?j:b.subPages;a.splice(1);a[0]in l||(n.changePage("projects",!d),a=["projects"]);n.changePage(a[0],!d);b.subPages=a;c||pages.pushState("soft",b.subPages)}};return b},CreateResumesPage=function(){for(var f={},c=0;c<data.resumes.length;c++){var g=data.resumes[c],i=document.createElement("Div");i.className="resumeWrapper";var h=document.createElement("Div");h.className="resumeLink";var k=function(b){var a=document.createElement("A");
a.href="/resumes/"+g.name+"/full."+b.toLowerCase();a.target="_blank";a.appendChild(document.createTextNode(b.toUpperCase()+" Version"));return a};h.appendChild(k("html"));h.appendChild(k("pdf"));k=new XMLHttpRequest;k.open("GET","/resumes/"+g.name+"/part.html",!0);k.addEventListener("readystatechange",function(b,a){return function(d){4===d.target.readyState&&200===d.target.status&&(console.log(d),b.innerHTML=d.target.responseText,b.insertBefore(a,b.firstChild))}}(i,h),!1);k.send();f[g.name]={title:g.name,
node:i}}var l=data.resumes[0].name,n=CreateNavigation("Navigation",f,"/resume/",l,function(b,a){b!=a&&(j.subPages=[b],pages.pushState("resume",j.subPages))}),j={node:n.node,subPages:[],changeSubPage:function(b,a,d){if(!b||1>b.length)b=a?defaultSubPages:j.subPages;b.splice(1);var c=!1,g;for(g in f)f.hasOwnProperty(g)&&g==b[0]&&(n.changePage(g,!a),c=!0);c||(n.changePage(l,!a),b=[l]);j.subPages=b;d||pages.pushState("resume",j.subPages)}};return j};var CreateBanner=function(f,c){var g=document.createElement("Div");g.className="Banner";var i=document.createElement("H1");i.appendChild(document.createTextNode(f));g.appendChild(i);i=document.createElement("H2");i.appendChild(document.createTextNode(c));g.appendChild(i);i=document.createElement("Div");i.className="PlusOne";i.innerHTML='<div class="g-plusone" data-href="http://ajrussell.ca"></div>';g.appendChild(i);return g},CreateHeader=function(f,c,g,i){function h(b){a.select(b.currentTarget.id);
return!0}var k=document.createElement("Div"),l="";k.className="Header";for(var n in f){var j=document.createElement("A");j.id=n;j.href="/"+n;j.addEventListener("click",function(a){preventDefaultLink(a);return!0},!1);j.addEventListener("click",h,!1);j.addEventListener("keydown",keyToClick(h),!1);j.className="NoStyle";var b=document.createElement("Div");b.appendChild(document.createTextNode(f[n].text));j.appendChild(b);k.appendChild(j)}var a={select:function(a,b,g){a!=l?c(a,function(c){if(c==transition.STARTING){f[a].page.changeSubPage(b,
a==l,g);l=a;for(c=0;c<k.children.length;c++){var h=k.children[c];a===h.id?(h.className="Selected",h.setAttribute("tabindex","-1")):(h.className="",h.removeAttribute("tabindex"))}}}):f[a].page.changeSubPage(b,a==l,g)},node:k};a.select(g,i,!0);return a},CreateNavigation=function(f,c,g,i,h){function k(a){a=a.currentTarget.id;h(a,p);m.changePage(a)}var l=document.createElement("Div");l.className="NavigationMain";var n=document.createElement("Div");n.className="NavigationTitle";var j=document.createElement("Div");
j.className="Title";j.appendChild(document.createTextNode(f));n.appendChild(j);for(var b in c)f=document.createElement("A"),f.className="Pages NoStyle ButtonLink",f.href=escape(g+b),f.id=b,f.addEventListener("click",k,!1),f.addEventListener("click",function(a){return preventDefaultLink(a)},!1),f.addEventListener("keydown",keyToClick(k),!1),f.appendChild(document.createTextNode(c[b].title)),j=document.createElement("Div"),j.className="Arrow",j.appendChild(document.createTextNode(">")),f.appendChild(j),
c[b].titleNode=f,j=document.createElement("Div"),j.appendChild(c[b].node),c[b].node=j,n.appendChild(f);var a=document.createElement("Div");a.className="NavigationContent";var d=c[i].node,p=i;a.appendChild(d);l.appendChild(n);l.appendChild(a);var m={node:l,changePage:function(b,g){var f=c[b].node;p=b;g?(a.replaceChild(f,d),d=f):transition.slide(a,f,function(a){a==transition.SUCCESS&&(d=f)})}};return m},CreatePageTitle=function(f){var c=document.createElement("Div");c.className="PageTitle";c.appendChild(document.createTextNode(f));
return c},CreateList=function(f,c,g){var i=document.createElement("Div");i.className="List";var h=document.createElement("Div");h.className="Title";h.appendChild(document.createTextNode(f));i.appendChild(h);for(f=0;f<c.length;f++){var k=c[f],h=document.createElement("Div");h.id=k.id;h.className="Item";k.node?h.appendChild(k.node):k.text&&h.appendChild(document.createTextNode(k.text));if(g){var l=function(c){return function(){g(c);return!0}}(k);h.setAttribute("tabindex","0");h.addEventListener("click",
l,!1);h.addEventListener("keydown",keyToClick(l),!1);k.callback&&(l=function(c){return function(){k.callback(c)}}(k),h.addEventListener("mouseover",l,!1),h.addEventListener("focus",l,!1))}i.appendChild(h)}return i},CreateSubSection=function(f,c,g){var i=document.createElement("Div");i.className="SubSection";var h=document.createElement("Div");h.className="Title";h.appendChild(document.createTextNode(f));i.appendChild(h);c instanceof HTMLElement?f=c:(f=document.createElement("Div"),f.appendChild(document.createTextNode(c)));
f.className="SubTitle";i.appendChild(f);c=document.createElement("Div");c.className="Content";c.appendChild(g);i.appendChild(c);return i};
function CreateBoxView(f,c){var g=document.createElement("Div");g.className="Boxes";for(var i=0;i<f.length;i++){var h=f[i],k=document.createElement("A");k.href=escape(h.path);k.className="NoStyle";k.addEventListener("click",function(c){return preventDefaultLink(c)},!1);var l=function(f){return function(){c(f);return!0}}(h);k.addEventListener("click",l,!1);k.addEventListener("keydown",keyToClick(l),!1);l=document.createElement("Img");l.src=h.imgSrc;l.alt="";l.setAttribute("border","0");k.appendChild(l);
l=document.createElement("Div");l.appendChild(document.createTextNode(h.title));k.appendChild(l);g.appendChild(k)}return g}
function CreateAudioPlayer(){var f,c,g,i;function h(a){var b=document.createElement("Audio");a&&(b.src=b.canPlayType("audio/ogg")?a+".ogg":a+".mp3",b.controls=!0,b.addEventListener("ended",n,!1),b.addEventListener("error",n,!1),b.addEventListener("playing",function(){j(!0)},!1),b.addEventListener("pause",function(){j(!1)},!1));return b}function k(){s.toggleDisplay();return!0}function l(a){"Next"==a.target.className?s.playNext():s.playPrev();"click"==a.type&&a.target.blur()}function n(a){if(o||"ended"==
a.type||"error"==a.type){"error"==a.type&&u++;if(5==u)return u=0,!1;s.playNext()}else s.playPrev();return!0}function j(a){f&&f.callback&&f.callback(a)}var b=document.createElement("Div");b.className="AudioPlayer Audio";b.style.display="none";var a=document.createElement("Div"),d=document.createElement("Div"),p=document.createElement("Span");d.appendChild(p);a.appendChild(d);var m=h();a.appendChild(m);d=document.createElement("Div");d.className="Prev";d.setAttribute("role","button");d.setAttribute("tabindex",
"0");a.appendChild(d);var q=document.createElement("Div");q.className="Next";q.setAttribute("role","button");q.setAttribute("tabindex","0");a.appendChild(q);i=g=c=f=void 0;var o=!0,u=0,v=!0,s={toggleDisplay:function(c){!c&&!1!==c&&(c=!v);if(c)transition.isUsingTransitions()?b.style[transition.getTransformStyle()]="translate(0px, 0px)":b.style.bottom="0px";else{var d=a.offsetHeight;transition.isUsingTransitions()?b.style[transition.getTransformStyle()]="translate(0px, "+d+"px)":b.style.bottom=-d+"px"}v=
c},play:function(d){if(d&&d!=i){j(!1);var k=d.split("/");c=data.artists[k[0]];g=c.albums[k[1]];f=g.songs[k[2]];i=d;p.innerHTML="";d=document.createElement("Div");d.appendChild(document.createTextNode(c.name));d.className="Artist";p.appendChild(d);d=document.createElement("Div");d.appendChild(document.createTextNode(g.name));d.className="Album";p.appendChild(d);d=document.createElement("Div");d.appendChild(document.createTextNode(f.name));d.className="Song";p.appendChild(d);d=c.name+"/"+g.name+"/"+
f.name;a.removeChild(m);m=h("/audio/"+escape(d));a.appendChild(m);m.play()}else if(m.paused)m.play();else return;b.style.display=""},playNext:function(){o=!0;var a=i.split("/"),b=data.artists[a[0]],d=b.albums[a[1]];for(a[2]++;a[2]>=d.songs.length||!d.songs[a[2]].recording;){for(a[1]++;a[1]>=b.albums.length;)a[0]=(a[0]+1)%data.artists.length,b=data.artists[a[0]],a[1]=0;d=b.albums[a[1]];a[2]=0}s.play(a.join("/"));return!0},playPrev:function(){o=!1;var a=i.split("/"),b=data.artists[a[0]],d=b.albums[a[1]];
for(a[2]--;0>a[2]||!d.songs[a[2]].recording;){for(a[1]--;0>a[1];)a[0]=(a[0]+data.artists.length-1)%data.artists.length,b=data.artists[a[0]],a[1]=b.albums.length-1;d=b.albums[a[1]];a[2]=d.songs.length-1}s.play(a.join("/"));return!0},pause:function(){m.pause()},toggle:function(a){s.isPlaying(a)?s.pause():s.play(a)},isPlaying:function(a){return a&&a!=i?!1:!m.paused},getNode:function(){return b}};d.addEventListener("click",l,!1);d.addEventListener("keydown",keyToClick(l),!1);d.setAttribute("title","Previous Track");
q.addEventListener("click",l,!1);q.addEventListener("keydown",keyToClick(l),!1);q.setAttribute("title","Next Track");d=document.createElement("Span");d.className="ButtonMain";d.appendChild(document.createTextNode("Audio Player"));d.setAttribute("role","button");d.setAttribute("tabindex","0");b.appendChild(d);b.appendChild(a);d.addEventListener("click",k,!1);d.addEventListener("keydown",keyToClick(k),!1);return s}
function preventDefaultLink(f){return window.history&&window.history.pushState?(f.preventDefault(),!1):!0}function keyToClick(f,c){c||(c=[13,32]);return function(g){if(0<=c.indexOf(g.keyCode))return g.stopPropagation(),g.preventDefault(),f(g)}};(function(){function f(b,a,d,c){function g(){a.removeEventListener(h,g,!1);b.removeChild(q);b.style.overflow="";b.style.height="";q.style[i]="";q.style.opacity="";q.style[k]="";a.style[i]="";a.style.opacity="";a.style[k]="";a.style.position="";a.style.top="";n=!1;c(window.transition.SUCCESS);j&&(setTimeout(function(a){return function(){f(a.node,a.newPage,a.options,a.callback)}}(j),1),j=null)}if(a===b||!b||!a||!window.history||!window.history.pushState)c(window.transition.FAILED);else if(n)j?c(window.transition.FAILED):
j={node:b,newPage:a,options:d,callback:c};else{var q=b.firstChild;if(q===a)c(window.transition.STARTING),c(window.transition.SUCCESS);else if(a.parentElement||document.body.compareDocumentPosition(b)&1)c(window.transition.FAILED);else if(n=!0,c(window.transition.STARTING),l){d=d||{};!d.fade&&!d.scale&&!d.slide&&(d.fade=!0);var o=d.duration||500,o=o+"ms",u=b.offsetWidth,v="";d.scale&&(v+=" scale(1.5)");d.slide&&(v+=" translateX(-"+u+"px)");a.style[k]=v;d.fade&&(a.style.opacity="0");a.style.position=
"absolute";a.style.top="0px";b.appendChild(a);q.style[i]=a.style[i]=""+o;if(d.slide||d.scale)b.style.overflow="hidden";setTimeout(function(){var c=Math.max(b.clientHeight,a.offsetHeight);b.style.height=c+"px";a.addEventListener(h,g,false);if(d.fade){q.style.opacity="0";a.style.opacity="1"}var f=c="";if(d.scale){c=c+" scale(0.5)";f=f+" scale(1)"}if(d.slide){c=c+(" translateX("+u+"px)");f=f+" translateX(0px)"}q.style[k]=c;a.style[k]=f},1)}else b.replaceChild(a,q),n=!1,c(window.transition.SUCCESS)}}
var c=document.createElement("Div"),g="webkitTransition"in c.style?"webkit":"MozTransition"in c.style?"Moz":"oTransition"in c.style?"o":"MSTransition"in c.style?"MS":"Transition"in c.style?"":"Old",c=void 0,i=g+"Transition",h=g+"TransitionEnd",k=g+"Transform";"Moz"==g&&(h="transitionend");var l=!0;"Old"==g&&(l=!1);window.transition={slide:function(b,a,c,g){return f(b,a,{slide:!0,duration:g},c)},scale:function(b,a,c,g){return f(b,a,{scale:!0,fade:!0,duration:g},c)},fade:function(b,a,c,g){return f(b,
a,{fade:!0,duration:g},c)},getTransitionEndEvent:function(){return h},getTransitionStyle:function(){return i},getTransformStyle:function(){return k},isUsingTransitions:function(){return l},STARTING:0,SUCCESS:1,FAILED:2};var n=!1,j=null})();
