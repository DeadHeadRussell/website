(function(){window.ajrussell={register:function(e,c){if(2!=arguments.length)throw Error("primal.research.register requires 2 parameters");for(var g=e.split("."),f=i,d=0;d<g.length-1;d++){var b=g[d];f[b]||(f[b]={});f=f[b]}b=g[g.length-1];f[b]?(console.error("Cannot register library: "+e+". A library already exists"),console.error({new_library:c,old_library:f[b]})):f[b]=c},require:function(e){for(var e=e.split("."),c=i,g=0;g<e.length;g++){var f=e[g];if(!c[f])return null;c=c[f]}return!c?null:c}};var i=
{}})();(function(){function i(c){return window.history&&window.history.pushState?(c.preventDefault(),!1):!0}function e(c,g){g||(g=[13,32]);return function(f){if(0<=g.indexOf(f.keyCode))return f.stopPropagation(),f.preventDefault(),c(f)}}window.ajrussell.register("widgets",{createBanner:function(c,g){var f=document.createElement("Div");f.className="Banner";var d=document.createElement("H1");d.appendChild(document.createTextNode(c));f.appendChild(d);d=document.createElement("H2");d.appendChild(document.createTextNode(g));
f.appendChild(d);d=document.createElement("Div");d.className="PlusOne";d.innerHTML='<div class="g-plusone" data-href="http://ajrussell.ca"></div>';f.appendChild(d);return f},createHeader:function(c){function g(b){c(b.currentTarget.id);return!0}var f=document.createElement("div"),d=null;f.className="Header";return{getNode:function(){return f},add:function(b){var a=document.createElement("a");a.id=b;a.href="/"+b;a.addEventListener("click",i);a.addEventListener("click",g);a.addEventListener("keydown",
e(g));a.className="NoStyle";var h=document.createElement("Div");h.appendChild(document.createTextNode(b));a.appendChild(h);f.appendChild(a);d||(d=b,a.className="Selected",h.setAttribute("tabindex","-1"))},select:function(b){if(b!=d){d=b;for(var a=0;a<f.children.length;a++){var h=f.children[a];b===h.id?(h.className="Selected",h.setAttribute("tabindex","-1")):(h.className="",h.removeAttribute("tabindex"))}}}}},createBoxView:function(c,g){var f=document.createElement("Div");f.className="Boxes";for(var d=
0;d<c.length;d++){var b=c[d],a=document.createElement("A");a.href=escape(b.path);a.className="NoStyle";a.addEventListener("click",function(a){return i(a)},!1);var h=function(a){return function(){g(a);return!0}}(b);a.addEventListener("click",h,!1);a.addEventListener("keydown",e(h),!1);h=document.createElement("Img");h.src=b.imageSource;h.alt="";h.setAttribute("border","0");a.appendChild(h);h=document.createElement("Div");h.appendChild(document.createTextNode(b.title));a.appendChild(h);f.appendChild(a)}return f},
createList:function(c,g,f){var d=document.createElement("Div");d.className="List";var b=document.createElement("Div");b.className="Title";b.appendChild(document.createTextNode(c));d.appendChild(b);for(c=0;c<g.length;c++){var a=g[c],b=document.createElement("Div");b.id=a.id;b.className="Item";a.node?b.appendChild(a.node):a.text&&b.appendChild(document.createTextNode(a.text));if(f){var h=function(a){return function(){f(a);return!0}}(a);b.setAttribute("tabindex","0");b.addEventListener("click",h,!1);
b.addEventListener("keydown",e(h),!1);a.callback&&(h=function(b){return function(){a.callback(b)}}(a),b.addEventListener("mouseover",h,!1),b.addEventListener("focus",h,!1))}d.appendChild(b)}return d}})})();(function(){function i(c,j,e,r){function s(){j.removeEventListener(f,s,!1);l.removeChild(c);l.style.overflow="";l.style.height="";c.style[g]="";c.style.opacity="";c.style[d]="";j.style[g]="";j.style.opacity="";j.style[d]="";j.style.position="";j.style.top="";h=!1;m(a.SUCCESS);k&&(setTimeout(function(a){return function(){i(a.node,a.newNode,a.options,a.callback)}}(k),1),k=null)}function m(a){"function"==typeof r&&r(a)}var l=c.parentNode;if(j===l||!l||!j||!window.history||!window.history.pushState)m(a.FAILED);
else if(h)k?m(a.FAILED):k={node:l,newNode:j,options:e,callback:m};else if(c===j)m(a.STARTING),m(a.SUCCESS);else if(j.parentElement||document.body.compareDocumentPosition(l)&1)m(a.FAILED);else if(h=!0,m(a.STARTING),b){e=e||{};!e.fade&&!e.scale&&!e.slide&&(e.fade=!0);var q=e.duration||500,q=q+"ms",t=l.offsetWidth,o="";e.scale&&(o+=" scale(1.5)");e.slide&&(o+=" translateX(-"+t+"px)");j.style[d]=o;e.fade&&(j.style.opacity="0");j.style.position="absolute";j.style.top="0px";l.appendChild(j);c.style[g]=
j.style[g]=""+q;if(e.slide||e.scale)l.style.overflow="hidden";setTimeout(function(){var a=Math.max(l.clientHeight,j.offsetHeight);l.style.height=a+"px";j.addEventListener(f,s,false);if(e.fade){c.style.opacity="0";j.style.opacity="1"}var b=a="";if(e.scale){a=a+" scale(0.5)";b=b+" scale(1)"}if(e.slide){a=a+(" translateX("+t+"px)");b=b+" translateX(0px)"}c.style[d]=a;j.style[d]=b},1)}else l.replaceChild(j,c),h=!1,m(a.SUCCESS)}var e=document.createElement("Div"),c="webkitTransition"in e.style?"webkit":
"MozTransition"in e.style?"Moz":"oTransition"in e.style?"o":"MSTransition"in e.style?"MS":"Transition"in e.style?"":"Old",e=void 0,g=c+"Transition",f=c+"TransitionEnd",d=c+"Transform";"Moz"==c&&(f="transitionend");var b=!0;"Old"==c&&(b=!1);var a={slide:function(a,b,c,h){return i(a,b,{slide:!0,duration:h},c)},scale:function(a,b,c,h){return i(a,b,{scale:!0,fade:!0,duration:h},c)},fade:function(a,b,c,h){return i(a,b,{fade:!0,duration:h},c)},getTransitionEndEvent:function(){return f},getTransitionStyle:function(){return g},
getTransformStyle:function(){return d},isUsingTransitions:function(){return b},STARTING:0,SUCCESS:1,FAILED:2};window.ajrussell.register("transitions",a);var h=!1,k=null})();(function(){function i(){function f(d){if(d){root_page_id=d.toLowerCase();for(var e=[];!g[root_page_id];){page_ids=root_page_id.split("/");if(1>=page_ids.length){n[d]&&f(n[d]);return}e.push(page_ids.pop());root_page_id=page_ids.join("/")}e=g[root_page_id].page_handler.getNode(e);j?(c.fade(j,e),b("pushState",d)):(a.appendChild(e),b("replaceState",d));j=e;h.select(d.split("/")[0])}}function d(a){var b={};return{getId:function(){return a},getNode:function(c){c||(c=[]);sub_pages_id=c.join("/");b[sub_pages_id]||
(b[sub_pages_id]=g[a].creation_callback(i,c));return b[sub_pages_id]}}}function b(a,b){if(a){var c="/"+b;window.history[a]({page_id:b},escape(b),escape(c))}}var a=document.createElement("Div"),h=e(f),g={},n={},j=null,i=null;a.className="main";a.appendChild(h.getNode());window.addEventListener("popstate",function(a){(a=a.state)&&a.page_id&&f(a.page_id);return!0},!1);return{getNode:function(){return a},setData:function(a){i=a},registerPage:function(a,b,c){c&&h.add(a);a&&0<a.length&&b&&(a=a.toLowerCase(),
g[a]={page_handler:d(a),creation_callback:b},n[a]&&delete n[a])},aliasPage:function(a,b,c){c&&h.add(a);a&&b&&0<a.length&&0<b.length&&(a=a.toLowerCase(),n[a]=b,g[a]&&delete g[a])},gotoPage:f}}window.ajrussell.register("pages",{getPagesHandler:function(){g||(g=i());return g}});var e=window.ajrussell.require("widgets.createHeader"),c=window.ajrussell.require("transitions"),g=null})();
var CreateSoftPage=function(){var i=document.createElement("Div");i.className="resumeWrapper";if(0<data.resumes.length){var e=document.createElement("Div");e.className="resumeLink";var c=function(a){var b=document.createElement("A");b.href="/resumes/"+data.resumes[0].path+"."+a.toLowerCase();b.target="_blank";b.appendChild(document.createTextNode(a.toUpperCase()+" Version"));return b};e.appendChild(c("html"));e.appendChild(c("pdf"));c=new XMLHttpRequest;c.open("GET","/resumes/"+data.resumes[0].path+
"_part.html",!0);c.addEventListener("readystatechange",function(a){4===a.target.readyState&&200===a.target.status&&(i.innerHTML=a.target.responseText,i.insertBefore(e,i.firstChild))},!1);c.send()}c=document.createElement("Div");c.className="softwareProjects";for(var g=0;g<data.personalProjects.length;g++){p=data.personalProjects[g];var f=document.createElement("Div"),d=document.createElement("A"),b=p.name.toLowerCase().replace(/ /g,"-");d.href="https://github.com/DeadHeadRussell/"+b;d.appendChild(document.createTextNode("Source"));
f.appendChild(d);d=document.createElement("Img");d.src="/img/soft/"+p.name+".png";f.appendChild(d);d=document.createElement("P");d.appendChild(document.createTextNode(p.description));f.appendChild(d);c.appendChild(CreateSubSection(p.name,"",f))}var a=CreateNavigation("Navigation",{resume:{title:"Resume",node:i},projects:{title:"Projects",node:c}},"/soft/","resume",function(a,b){a!=b&&(k.subPages=[a],pages.pushState("soft",k.subPages))}),h=["resume"],k={node:a.node,subPages:h,changeSubPage:function(b,
c,d){if(!b||1>b.length)b=c?h:k.subPages;b.splice(1);"projects"==b[0]?a.changePage(b[0],!c):(a.changePage("resume",!c),b=["resume"]);k.subPages=b;d||pages.pushState("soft",k.subPages)}};return k},CreateAboutPage=function(){var i=document.createElement("Div");i.className="about";var e=document.createElement("Div");i.appendChild(e);e.appendChild(CreateSubSection("About","",document.createTextNode("Alright, alright already.  Maybe this page won't get done for while.  Writing about yourself is hard.")));
var c={node:i,subPages:[],changeSubPage:function(e,f,d){c.subPages=[];d||pages.pushState("about",c.subPages)}};return c};(function(){function i(b){var a=document.createElement("div");a.className="head";var c=document.createElement("H1");c.appendChild(document.createTextNode("Welcome."));a.appendChild(c);c=document.createElement("div");c.appendChild(document.createTextNode(b.intro));a.appendChild(c);return a}function e(){return f.createBoxView([{id:"Music",title:"Music",path:"/Music",imageSource:"/img/music/main.jpg"},{id:"Software",title:"Software",path:"/Soft",imageSource:"/img/software/main.jpg"},{id:"Resumes",title:"Resumes",
path:"/Resumes",imageSource:"/img/resumes/main.jpg"}],function(b){d.gotoPage(b.id);return!0})}function c(b){var a=Math.floor(Math.random()*b.sites.length),a=b=b.sites[a],c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("a");e.appendChild(document.createTextNode(a.name));e.href=a.link;e.setAttribute("target","_blank");d.appendChild(e);c.appendChild(d);d=document.createElement("div");d.appendChild(document.createTextNode(a.description));c.appendChild(d);b=f.createList("Random Plug",
[{id:b.name,node:c}]);b.className+=" sites";return b}var g=window.ajrussell.require("pages"),f=window.ajrussell.require("widgets"),d=g.getPagesHandler();d.registerPage("Home",function(b){var a=document.createElement("div");a.className="Home";a.appendChild(i(b));a.appendChild(e(b));a.appendChild(c(b));return a},!0)})();(function(){var i=window.ajrussell.require("pages").getPagesHandler();i.aliasPage("Music","Music/Artists",!0);i.registerPage("Music/Artists",function(){})})();(function(){window.ajrussell.require("pages").getPagesHandler().registerPage("Software",function(){},!0)})();(function(){window.ajrussell.require("pages").getPagesHandler().registerPage("Resumes",function(){},!0)})();(function(){function i(a){console&&(console.log(a.message),console.log(a.stack))}function e(){f&&(document.body.innerHTML='<div>Please use one of the following browsers<ul><li><a href="http://www.google.com/chrome/">Google Chrome</a></li><li><a href="http://www.mozilla.com">Mozilla Firefox</a></li></ul></div>')}var c=window.ajrussell.require("pages"),g=window.ajrussell.require("widgets.createBanner"),f=!1,d=null,b=!1,a=function(){if(d&&f)try{var a=document.createElement("div");document.body.appendChild(a);
a.appendChild(g(d.about.name,d.about.title));var k=location.pathname.split("/");k.shift();k=["Home"];k=k.join("/");c=c.getPagesHandler();c.setData(d);c.gotoPage(k);a.appendChild(c.getNode())}catch(n){b=!0,i(n),e()}};(function(){try{var c=new XMLHttpRequest;c.open("GET","/data.json",!0);c.addEventListener("readystatechange",function(b){4===b.target.readyState&&200===b.target.status&&(d=JSON.parse(b.target.responseText),a())},!1);c.send()}catch(f){b=!0,i(f),e()}})();window.addEventListener("load",function(){f=
!0;b?e():a()},!1)})();
